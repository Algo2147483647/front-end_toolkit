<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>几何时钟与日历</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0c0c2e, #1a1a3e);
            color: #f0f0f0;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        /* 顶部导航栏 */
        .navbar {
            display: flex;
            justify-content: center;
            padding: 20px;
            background: rgba(10, 10, 30, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(100, 100, 255, 0.2);
        }

        .nav-toggle {
            display: flex;
            background: rgba(20, 20, 50, 0.7);
            border-radius: 50px;
            padding: 5px;
            position: relative;
            border: 1px solid rgba(100, 100, 255, 0.3);
        }

        .toggle-btn {
            padding: 12px 30px;
            border-radius: 50px;
            background: transparent;
            border: none;
            color: #aaa;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .toggle-btn.active {
            color: #fff;
        }

        .toggle-slider {
            position: absolute;
            top: 5px;
            left: 5px;
            height: calc(100% - 10px);
            width: calc(50% - 10px);
            background: linear-gradient(to right, #4a6fff, #6d8eff);
            border-radius: 50px;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 4px 15px rgba(74, 111, 255, 0.4);
        }

        /* 主容器 */
        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            position: relative;
        }

        /* 时钟视图 */
        .clock-view {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            transition: transform 0.6s ease, opacity 0.6s ease;
        }

        /* 时钟圆盘容器 */
        .clock-container {
            position: relative;
            margin-bottom: 30px;
            transition: transform 0.3s ease;
        }

        /* 时钟圆盘 */
        .clock-face {
            background: rgba(15, 15, 40, 0.7);
            border-radius: 50%;
            border: 2px solid rgba(100, 100, 255, 0.2);
            box-shadow:
                0 0 60px rgba(74, 111, 255, 0.2),
                inset 0 0 30px rgba(20, 20, 50, 0.8);
            position: relative;
            overflow: hidden;
        }

        /* 24小时刻度 */
        .hour-marks {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .hour-mark {
            position: absolute;
            top: 0;
            left: 50%;
            width: 2px;
            height: 15px;
            background: rgba(150, 150, 255, 0.7);
            transform-origin: 0 50%;
            border-radius: 1px;
        }

        /* 小时文本 */
        .hour-text {
            position: absolute;
            color: rgba(200, 200, 255, 0.9);
            font-size: 18px;
            font-weight: 600;
            transform: translate(-50%, -50%);
        }

        /* 时钟指针 */
        .hour-hand, .minute-hand, .second-hand {
            position: absolute;
            transform-origin: center bottom;
            border-radius: 4px 4px 0 0;
            left: 50%;
            top: 50%;
            transform: translateX(-50%) translateY(-100%);
        }

        .hour-hand {
            width: 8px;
            height: 30%;
            background: linear-gradient(to top, #4a6fff, #8ba4ff);
            z-index: 3;
        }

        .minute-hand {
            width: 6px;
            height: 40%;
            background: linear-gradient(to top, #6d8eff, #a5c1ff);
            z-index: 4;
        }

        .second-hand {
            width: 2px;
            height: 45%;
            background: #ff4a4a;
            z-index: 5;
        }

        /* 中心点 */
        .center-dot {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 16px;
            height: 16px;
            background: #fff;
            border-radius: 50%;
            z-index: 10;
            box-shadow: 0 0 10px #fff;
        }

        /* 数字时钟 */
        .digital-clock {
            position: absolute;
            top: 70%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(10, 10, 30, 0.7);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 20px;
            font-size: 28px;
            font-weight: 700;
            letter-spacing: 2px;
            color: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(100, 100, 255, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            gap: 10px;
            z-index: 2;
            min-width: 250px;
            justify-content: center;
        }

        .time-part {
            display: flex;
            justify-content: center;
        }

        .time-separator {
            opacity: 0.7;
        }

        /* 日历视图 */
        .calendar-view {
            width: 100%;
            max-width: 800px;
            background: rgba(15, 15, 40, 0.8);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(100, 100, 255, 0.2);
            backdrop-filter: blur(10px);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            opacity: 0;
            pointer-events: none;
            transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .calendar-view.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            pointer-events: all;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(100, 100, 255, 0.2);
        }

        .calendar-title {
            font-size: 28px;
            font-weight: 700;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .calendar-nav {
            display: flex;
            gap: 15px;
        }

        .nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(30, 30, 70, 0.7);
            border: 1px solid rgba(100, 100, 255, 0.3);
            color: #fff;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: rgba(74, 111, 255, 0.3);
            transform: scale(1.1);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }

        .weekday {
            text-align: center;
            font-weight: 600;
            color: rgba(200, 200, 255, 0.9);
            padding: 15px 0;
            font-size: 16px;
        }

        .calendar-day {
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(30, 30, 70, 0.3);
            border: 1px solid transparent;
        }

        .calendar-day:hover {
            background: rgba(74, 111, 255, 0.2);
            transform: translateY(-5px);
        }

        .calendar-day.today {
            background: linear-gradient(135deg, #4a6fff, #6d8eff);
            color: white;
            box-shadow: 0 5px 15px rgba(74, 111, 255, 0.4);
        }

        .calendar-day.other-month {
            color: rgba(255, 255, 255, 0.3);
            background: rgba(30, 30, 70, 0.1);
        }

        /* 时钟尺寸控制 */
        .size-control {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(15, 15, 40, 0.8);
            padding: 15px 20px;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            border: 1px solid rgba(100, 100, 255, 0.2);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .size-control label {
            font-size: 14px;
            color: rgba(200, 200, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
        }

        .size-slider {
            width: 200px;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: rgba(30, 30, 70, 0.8);
            outline: none;
        }

        .size-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: linear-gradient(to right, #4a6fff, #6d8eff);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(74, 111, 255, 0.8);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .clock-face {
                width: 300px !important;
                height: 300px !important;
            }

            .digital-clock {
                font-size: 22px;
                padding: 12px 20px;
                min-width: 200px;
            }

            .calendar-view {
                padding: 20px;
                margin-top: 20px;
            }

            .calendar-day {
                height: 50px;
                font-size: 16px;
            }

            .size-control {
                right: 20px;
                bottom: 20px;
                padding: 12px 15px;
            }

            .size-slider {
                width: 150px;
            }
        }

        @media (max-width: 480px) {
            .clock-face {
                width: 250px !important;
                height: 250px !important;
            }

            .digital-clock {
                font-size: 18px;
                padding: 10px 15px;
                min-width: 170px;
            }

            .calendar-view {
                padding: 15px;
            }

            .calendar-day {
                height: 40px;
                font-size: 14px;
            }

            .weekday {
                font-size: 14px;
                padding: 10px 0;
            }

            .size-control {
                position: static;
                margin: 20px auto;
                width: 90%;
            }

            .size-slider {
                width: 100%;
            }
        }

        /* 动画效果 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }

        /* 隐藏类 */
        .hidden {
            display: none;
        }

        /* 时钟切换时的动画 */
        .clock-view.hidden {
            transform: translateY(-30px);
            opacity: 0;
            pointer-events: none;
            position: absolute;
        }
    </style>
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="navbar">
        <div class="nav-toggle">
            <div class="toggle-slider"></div>
            <button class="toggle-btn active" id="clock-btn">
                <i class="fas fa-clock"></i> 时钟
            </button>
            <button class="toggle-btn" id="calendar-btn">
                <i class="fas fa-calendar-alt"></i> 日历
            </button>
        </div>
    </nav>

    <!-- 主容器 -->
    <div class="container">
        <!-- 时钟视图 -->
        <div class="clock-view fade-in" id="clock-view">
            <div class="clock-container">
                <canvas id="clock-face" class="clock-face"></canvas>
                <div class="digital-clock" id="digital-clock">
                    <div class="time-part" id="hours">00</div>
                    <div class="time-separator">:</div>
                    <div class="time-part" id="minutes">00</div>
                    <div class="time-separator">:</div>
                    <div class="time-part" id="seconds">00</div>
                </div>
            </div>
        </div>

        <!-- 日历视图 -->
        <div class="calendar-view" id="calendar-view">
            <div class="calendar-header">
                <div class="calendar-title">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="calendar-month-year">2023年10月</span>
                </div>
                <div class="calendar-nav">
                    <button class="nav-btn" id="prev-month"><i class="fas fa-chevron-left"></i></button>
                    <button class="nav-btn" id="today-btn">今天</button>
                    <button class="nav-btn" id="next-month"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
            <div class="calendar-grid" id="calendar-grid">
                <!-- 日历将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>

    <!-- 时钟尺寸控制 -->
    <div class="size-control">
        <label>
            圆盘尺寸调整
            <input type="range" min="200" max="500" value="350" class="size-slider" id="size-slider">
        </label>
    </div>

    <script>
        // 获取DOM元素
        const clockBtn = document.getElementById('clock-btn');
        const calendarBtn = document.getElementById('calendar-btn');
        const clockView = document.getElementById('clock-view');
        const calendarView = document.getElementById('calendar-view');
        const toggleSlider = document.querySelector('.toggle-slider');
        const sizeSlider = document.getElementById('size-slider');
        const clockFace = document.getElementById('clock-face');
        const digitalClock = document.getElementById('digital-clock');
        const hoursElement = document.getElementById('hours');
        const minutesElement = document.getElementById('minutes');
        const secondsElement = document.getElementById('seconds');

        // 时钟和日历切换功能
        clockBtn.addEventListener('click', () => {
            clockBtn.classList.add('active');
            calendarBtn.classList.remove('active');
            toggleSlider.style.transform = 'translateX(0)';

            clockView.classList.remove('hidden');
            calendarView.classList.remove('active');

            setTimeout(() => {
                clockView.classList.add('fade-in');
            }, 50);
        });

        calendarBtn.addEventListener('click', () => {
            calendarBtn.classList.add('active');
            clockBtn.classList.remove('active');
            toggleSlider.style.transform = 'translateX(100%)';

            clockView.classList.add('hidden');
            clockView.classList.remove('fade-in');
            calendarView.classList.add('active');
        });

        // 时钟尺寸调整
        let clockSize = parseInt(sizeSlider.value);

        sizeSlider.addEventListener('input', function() {
            clockSize = parseInt(this.value);
            updateClockSize();
        });

        function updateClockSize() {
            clockFace.width = clockSize;
            clockFace.height = clockSize;
            clockFace.style.width = `${clockSize}px`;
            clockFace.style.height = `${clockSize}px`;

            // 调整数字时钟位置
            const digitalClockHeight = 60;
            digitalClock.style.top = `${clockSize * 0.7}px`;

            drawClock();
        }

        // 绘制24小时圆盘时钟
        function drawClock() {
            const ctx = clockFace.getContext('2d');
            const centerX = clockFace.width / 2;
            const centerY = clockFace.height / 2;
            const radius = clockFace.width / 2 - 10;

            // 清空画布
            ctx.clearRect(0, 0, clockFace.width, clockFace.height);

            // 绘制圆盘背景
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            const gradient = ctx.createRadialGradient(
                centerX, centerY, radius * 0.5,
                centerX, centerY, radius
            );
            gradient.addColorStop(0, 'rgba(25, 25, 60, 0.8)');
            gradient.addColorStop(1, 'rgba(10, 10, 30, 0.9)');
            ctx.fillStyle = gradient;
            ctx.fill();

            // 绘制外圆边框
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.strokeStyle = 'rgba(100, 100, 255, 0.3)';
            ctx.lineWidth = 2;
            ctx.stroke();

            // 绘制24小时刻度
            for (let i = 0; i < 24; i++) {
                const angle = (i * Math.PI * 2) / 24;
                const startX = centerX + Math.sin(angle) * (radius - 15);
                const startY = centerY - Math.cos(angle) * (radius - 15);
                const endX = centerX + Math.sin(angle) * (radius - 5);
                const endY = centerY - Math.cos(angle) * (radius - 5);

                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.strokeStyle = i % 6 === 0 ? 'rgba(150, 150, 255, 0.9)' : 'rgba(150, 150, 255, 0.6)';
                ctx.lineWidth = i % 6 === 0 ? 3 : 2;
                ctx.stroke();

                // 绘制小时数字（24小时制）
                const textX = centerX + Math.sin(angle) * (radius - 35);
                const textY = centerY - Math.cos(angle) * (radius - 35);

                ctx.font = i % 6 === 0 ? 'bold 18px Arial' : '16px Arial';
                ctx.fillStyle = i % 6 === 0 ? 'rgba(220, 220, 255, 0.9)' : 'rgba(200, 200, 255, 0.7)';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(i === 0 ? '24' : i.toString(), textX, textY);
            }

            // 获取当前时间
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();

            // 计算指针角度（24小时制）
            const hourAngle = (hours % 24 + minutes / 60) * Math.PI / 12 - Math.PI / 2;
            const minuteAngle = (minutes + seconds / 60) * Math.PI / 30 - Math.PI / 2;
            const secondAngle = seconds * Math.PI / 30 - Math.PI / 2;

            // 绘制时针
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(
                centerX + Math.cos(hourAngle) * radius * 0.5,
                centerY + Math.sin(hourAngle) * radius * 0.5
            );
            ctx.strokeStyle = '#4a6fff';
            ctx.lineWidth = 8;
            ctx.lineCap = 'round';
            ctx.stroke();

            // 绘制分针
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(
                centerX + Math.cos(minuteAngle) * radius * 0.7,
                centerY + Math.sin(minuteAngle) * radius * 0.7
            );
            ctx.strokeStyle = '#6d8eff';
            ctx.lineWidth = 6;
            ctx.lineCap = 'round';
            ctx.stroke();

            // 绘制秒针
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(
                centerX + Math.cos(secondAngle) * radius * 0.8,
                centerY + Math.sin(secondAngle) * radius * 0.8
            );
            ctx.strokeStyle = '#ff4a4a';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.stroke();

            // 绘制中心点
            ctx.beginPath();
            ctx.arc(centerX, centerY, 8, 0, Math.PI * 2);
            ctx.fillStyle = '#fff';
            ctx.fill();

            ctx.beginPath();
            ctx.arc(centerX, centerY, 4, 0, Math.PI * 2);
            ctx.fillStyle = '#ff4a4a';
            ctx.fill();
        }

        // 更新数字时钟
        function updateDigitalClock() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');

            hoursElement.textContent = hours;
            minutesElement.textContent = minutes;
            secondsElement.textContent = seconds;
        }

        // 日历功能
        const calendarMonthYear = document.getElementById('calendar-month-year');
        const calendarGrid = document.getElementById('calendar-grid');
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');
        const todayBtn = document.getElementById('today-btn');

        let currentDate = new Date();
        let currentYear = currentDate.getFullYear();
        let currentMonth = currentDate.getMonth();

        // 星期标题
        const weekdays = ['日', '一', '二', '三', '四', '五', '六'];

        // 初始化日历
        function initCalendar() {
            // 添加星期标题
            calendarGrid.innerHTML = '';
            weekdays.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.className = 'weekday';
                dayElement.textContent = day;
                calendarGrid.appendChild(dayElement);
            });

            renderCalendar(currentYear, currentMonth);
        }

        // 渲染日历
        function renderCalendar(year, month) {
            // 移除之前的日子（保留星期标题）
            const days = document.querySelectorAll('.calendar-day');
            days.forEach(day => day.remove());

            // 更新标题
            const monthNames = ['一月', '二月', '三月', '四月', '五月', '六月',
                               '七月', '八月', '九月', '十月', '十一月', '十二月'];
            calendarMonthYear.textContent = `${year}年 ${monthNames[month]}`;

            // 获取当月第一天和最后一天
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const firstDayOfWeek = firstDay.getDay();

            // 添加上个月的最后几天
            const prevMonthLastDay = new Date(year, month, 0).getDate();
            for (let i = firstDayOfWeek - 1; i >= 0; i--) {
                const day = document.createElement('div');
                day.className = 'calendar-day other-month';
                day.textContent = prevMonthLastDay - i;
                calendarGrid.appendChild(day);
            }

            // 添加当月所有日子
            const today = new Date();
            for (let i = 1; i <= daysInMonth; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day';
                day.textContent = i;

                // 标记今天
                if (year === today.getFullYear() && month === today.getMonth() && i === today.getDate()) {
                    day.classList.add('today');
                }

                calendarGrid.appendChild(day);
            }

            // 添加下个月的前几天
            const totalCells = 42; // 6行 * 7天
            const cellsAdded = firstDayOfWeek + daysInMonth;
            const remainingCells = totalCells - cellsAdded;

            for (let i = 1; i <= remainingCells; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day other-month';
                day.textContent = i;
                calendarGrid.appendChild(day);
            }
        }

        // 日历导航
        prevMonthBtn.addEventListener('click', () => {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            renderCalendar(currentYear, currentMonth);
        });

        nextMonthBtn.addEventListener('click', () => {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            renderCalendar(currentYear, currentMonth);
        });

        todayBtn.addEventListener('click', () => {
            const today = new Date();
            currentYear = today.getFullYear();
            currentMonth = today.getMonth();
            renderCalendar(currentYear, currentMonth);
        });

        // 初始化
        function init() {
            updateClockSize();
            initCalendar();

            // 初始绘制
            drawClock();
            updateDigitalClock();

            // 设置定时器，每秒更新一次
            setInterval(() => {
                drawClock();
                updateDigitalClock();
            }, 1000);
        }

        // 页面加载完成后初始化
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>